box: golang:1.4
build:
    steps:
        - setup-go-workspace

        - script:
            name: go get
            code: go get ./...

        - script:
            name: go build
            code: go build ./...

        - script:
            name: go test
            code: go test ./..

deploy:
    steps:
        - add-to-known_hosts:
            hostname: blau.io

        - mktemp:
            envvar: PRIVATEKEY_PATH

        - create-file:
            name: write keyfile
            filename: $PRIVATEKEY_PATH
            content: $SSH_PRIVATE
            overwrite: true
            hide-from-log: true

